package org.example;

/*
    НЕВЕРНОЕ РЕШЕНИЕ

    Криминальный гений, которого все знают как Учёного, решил, что ему удастся обойти систему безопасности Нефтекамского городского банка.
    Для этого он собрал команду авантюристов со всей страны.
    Чтобы оставаться анонимными, даже между собой они общались без имён — использовали названия городов.

    Самый ловкий шпион, известный как Ростов, сумел выяснить, что у Николая Николаевича, директора банка,
        есть любимое число — k, и все пароли он подбирает таким образом, чтобы они на него делились без остатка.
    Также во всех его паролях чётность соседних цифр чередуется.
    Профессиональный взломщик Иркутск и его напарница Якутск — ответственные за самую важную часть ограбления: взлом сейфа.
    Они как никто другой знают, что чтобы план точно удался, необходимо с точностью до секунды просчитать все свои действия,
        поэтому обратились к Вам за помощью, чтобы узнать, какое время необходимо заложить на этот этап.

    Авантюристы уверены, что пароль состоит из n символов, а на перебор одного варианта тратится ровно одна секунда.
    Посчитайте, сколько секунд потребуется грабителям, чтобы перебрать все возможные варианты пароля.

    Формат ввода
    В первой строке через пробел задаются два натуральных числа: n (n≤10^4) — длина пароля и k (k≤10^3) — любимое число Николая Николаевича.

    Формат вывода
    Выведите, сколько секунд следует заложить грабителям на перебор всех вариантов пароля. Ответ считайте по модулю 10^9+7.

    Пример 1:
    Ввод:
    2 2
    Вывод:
    25

    Пример 2:
    Ввод:
    4 156
    Вывод:
    6

    Примечания
    В первом примере все числа являются двузначными и чётными.
    Тогда получается, что первая цифра принадлежит множеству {1,3,5,7,9}, а вторая цифра — {0,2,4,6,8}. Всего получается 25 комбинаций.

    Во втором примере среди всех четырёхзначных чисел только шесть делятся на 156 и при этом чётность цифр в них чередуется: 1092, 1872, 3276, 3432, 5616, 9672.
 */

import java.util.Scanner;

public class BankHack {
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        int n = scanner.nextInt(); // Длина пароля
        int k = scanner.nextInt(); // Любимое число Николая Николаевича

        // Массив dp для хранения количества комбинаций
        long[] dp = new long[n + 1];

        // Базовые значения для однозначного числа и нулевого числа
        dp[0] = 0;
        dp[1] = k % 2 == 0 ? k / 2 : k;

        // Заполнение массива dp
        for (int i = 2; i <= n; i++) {
            if (i % 2 == 0) {
                // Если i - четное
                dp[i] = dp[i - 1] * (k / 2) + dp[i - 2] * (k / 2);
            } else {
                // Если i - нечетное
                dp[i] = dp[i - 1] * ((k + 1) / 2) + dp[i - 2] * ((k - 1) / 2);
            }
            dp[i] %= 1000000007; // Ограничение по модулю
        }

        // Вывод ответа
        System.out.println(dp[n]);
    }
}



